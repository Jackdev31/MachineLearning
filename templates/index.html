<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MELONOTES</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link href="{{ url_for('static', filename='styleya.css') }}" rel="stylesheet" type="text/css" >
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>

<div class="container">
    <h2>MELONOTES</h2>
    <form method="post" action="/recommend">
        <div class="form-group">
            <label for="genre">Choose Genre:</label>
            <select id="genre" name="genre" onchange="updateArtistOptions()" class="form-select text-center">
                {% for key, value in genres.items() %}
                <option value="{{ key }}" {% if key == selected_genre or key == 1 %} selected {% endif %}>{{ value }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="artist">Choose Artist:</label>
            <select id="artist" name="artist" class="form-select text-center">
                <option value="1">Ed Sheeran</option>
                <option value="2">Taylor Swift</option>
                <option value="3">Justin Bieber</option>
                <option value="4">Ariana Grande</option>
                <option value="5">Katy Perry</option>
            </select>
        </div>
        <div class="btn-group">
            <button type="submit" class="btn btn-primary btn-l">Recommend Song</button> &nbsp;
            <a href="/" class="btn btn-secondary btn-l"><i class="fa fa-refresh"></i> Reset</a>
        </div>
    </form> 
    <br> 
    <div class="row justify-content-center">
    {% if popular_random %}
    <h6>Genre: {{ genres[selected_genre] }} </h6>
    <h6>Artist: {{ artistname }} </h6>
    <h3>Artist Popular Songs:</h3>
    {% for song in popular_random %}
    <div class="col-md-4">
        <div class="card bg-c-color ">
            <img src="{{ url_for('static', filename='img/' + artistname.lower() + '.jpg') }}" class="card-img-top img-fluid card-img" alt="{{ artistname }}">
            <div class="card-body text-white">
                <h6 class="card-title">Song Title: {{ song }}</h6>
            </div>
        </div>
    </div>
    {% endfor %}
    {% endif %}
</div>


<script>
    function updateArtistOptions() {
        var genreSelect = document.getElementById("genre");
        var artistSelect = document.getElementById("artist");
        
        var genre = genreSelect.value;
        artistSelect.innerHTML = '';
        if (genre === "1") {  // Pop
            addArtistOption(artistSelect, "1", "Ed Sheeran");
            addArtistOption(artistSelect, "2", "Taylor Swift");
            addArtistOption(artistSelect, "3", "Justin Bieber");
            addArtistOption(artistSelect, "4", "Ariana Grande");
            addArtistOption(artistSelect, "5", "Katy Perry");
        } else if (genre === "2") {  // Rock
            addArtistOption(artistSelect, "6", "Eagles");
            addArtistOption(artistSelect, "7", "AC DC");
            addArtistOption(artistSelect, "8", "Air Supply");
            addArtistOption(artistSelect, "9", "The Beatles");
            addArtistOption(artistSelect, "10", "Fallout Boy");
        } else if (genre === "3") {  // Emo
            addArtistOption(artistSelect, "11", "Paramore");
            addArtistOption(artistSelect, "12", "My Chemical Romance");
            addArtistOption(artistSelect, "13", "All Time Low");
            addArtistOption(artistSelect, "14", "Linkin Park");
            addArtistOption(artistSelect, "15", "Yellowcard");
        } else if (genre === "4") {  // K-Pop
            addArtistOption(artistSelect, "16", "IU");
            addArtistOption(artistSelect, "17", "EXO");
            addArtistOption(artistSelect, "18", "GOT 7");
            addArtistOption(artistSelect, "19", "BTS");
            addArtistOption(artistSelect, "20", "ENHYPEN");
        } else if (genre === "5") {  // Metal
            addArtistOption(artistSelect, "21", "Black Sabbath");
            addArtistOption(artistSelect, "22", "Megadeth");
            addArtistOption(artistSelect, "23", "Judas Priest");
            addArtistOption(artistSelect, "24", "Metallica");
            addArtistOption(artistSelect, "25", "Dream Theater");
        } 
    }
    
    function addArtistOption(select, value, text) {
        var option = document.createElement("option");
        option.value = value;
        option.text = text;
        select.add(option);
    }
</script>
</body>
</html>
